<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Index</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="870884524370-4degio3n3qeqdn5um4orrt56o6mvd843.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
	<link rel="stylesheet" type="text/css" media="screen" href="main.css" />
	
</head>
<body onload= "checkIfLoggedIn()">
	<h1>Login</h1> 
	<form action ="/login_process" method="POST">
		<label for="email">Email</label>
		<input type = "text" name="email" id="email" placeholder = "email address"></br></br>
		<label for="password">Password</label>
		<input type= "password" id="password" name="password"> </br></br>
		<input type = "submit" class ="Log in" value="Log in">
	</form>
	   <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark" 
	   data-scope="https://www.googleapis.com/auth/userinfo.profile"
	   data-accesstype="offline"
	   data-redirecturi="http://localhost:8080/edit_profile">
	   </div>
	    <!--"https://www.googleapis.com/auth/plus.login"  -->

	</br></br></br>
	<h1>Signup New User</h1>
	<form action ="/signup" method="POST">
		<label for="signup_email">Email</label>
		<input type = "text" name="signup_email" id="signup_email" placeholder = "email address"></br></br>
		<label for="signup_password">Password</label>
		<input type= "password" id="signup_password" name="signup_password"></br></br>
		<label for="signup_password_confirm">Confirm password</label>
		<input type= "password" id="signup_password_confirm" name="signup_password_confirm"> </br></br>
		<label for="signup_age">Age</label>
		<input type = "text" id="signup_age" name ="signup_age" placeholder = "how old are you?"></br></br>
		<label for="signup_gender">Gender</label>
		<input type = "text" id="signup_gender" name ="signup_gender"></br></br>
		<input type = "submit" class ="Sign up" value="Sign in">
		<script src="/javascript/logged_in_check.js"></script>
		<script>
		function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());
		

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
		
		var myUserEntity = {};
		myUserEntity.Id = profile.getId();
		myUserEntity.Name = profile.getName();
  
		//Store the entity object in sessionStorage where it will be accessible from all pages of your site.
		sessionStorage.setItem('myUserEntity',JSON.stringify(myUserEntity));

		alert(profile.getName());   
		//document.getElementById("signup_email").value = profile.getEmail();
		//location.replace("/edit_profile.html")
      }
	 
    </script>
	</form>
</body>
</html>